# FinSight Prediction Service Environment Configuration
# Copy this file to .env and update the values as needed

# ===== Application Settings =====
APP_NAME=FinSight Model Builder
APP_VERSION=1.0.0
DEBUG=false

# ===== API Settings =====
API_HOST=0.0.0.0
API_PORT=8000

# ===== Directory Paths =====
BASE_DIR=/path/to/finsight
DATA_DIR=/path/to/finsight/data
MODELS_DIR=/path/to/finsight/models
LOGS_DIR=/path/to/finsight/logs
JOGS_DIR=/path/to/finsight/jobs

# ===== Model Management =====
MODEL_NAME_PATTERN={symbol}_{timeframe}_{model_type}
CHECKPOINT_FILENAME=model.pt
METADATA_FILENAME=metadata.json
CONFIG_FILENAME=config.json

# ===== Model Training Defaults =====
DEFAULT_CONTEXT_LENGTH=64
DEFAULT_PREDICTION_LENGTH=1
DEFAULT_NUM_EPOCHS=10
DEFAULT_BATCH_SIZE=32
DEFAULT_LEARNING_RATE=0.001

# ===== Device Configuration =====
FORCE_CPU=true

# ===== Model Limits =====
MAX_CONTEXT_LENGTH=512
MAX_PREDICTION_LENGTH=24
MAX_NUM_EPOCHS=100

# ===== Cache Settings =====
ENABLE_MODEL_CACHE=true
MAX_CACHED_MODELS=5

# ===== Serving Adapter Settings =====
SERVING_ADAPTER_TYPE=simple
SIMPLE_MAX_MODELS_IN_MEMORY=5
SIMPLE_MODEL_TIMEOUT_SECONDS=3600

# ===== Triton Settings =====
TRITON_SERVER_URL=localhost:8000
TRITON_SERVER_GRPC_URL=localhost:8001
TRITON_USE_GRPC=false
TRITON_SSL=false
TRITON_INSECURE=true
TRITON_MODEL_REPOSITORY=/models
TRITON_DEFAULT_MODEL_VERSION=1
TRITON_MAX_BATCH_SIZE=8
TRITON_TIMEOUT_SECONDS=30

# ===== TorchServe Settings =====
TORCHSERVE_INFERENCE_URL=http://localhost:8080
TORCHSERVE_MANAGEMENT_URL=http://localhost:8081
TORCHSERVE_METRICS_URL=http://localhost:8082
TORCHSERVE_MODEL_STORE=./model_store
TORCHSERVE_BATCH_SIZE=1
TORCHSERVE_MAX_BATCH_DELAY=100
TORCHSERVE_TIMEOUT_SECONDS=30
TORCHSERVE_INITIAL_WORKERS=1
TORCHSERVE_MAX_WORKERS=4

# ===== Redis Settings =====
REDIS_URL=redis://localhost:6379/0
TRAINING_JOB_REPOSITORY_TYPE=file

# ===== Cloud Storage Configuration =====
# Storage provider: minio, digitalocean, aws
STORAGE_PROVIDER=digitalocean

# ===== DigitalOcean Spaces Configuration =====
SPACES_ENDPOINT_URL=https://nyc3.digitaloceanspaces.com
SPACES_ACCESS_KEY=your_digitalocean_spaces_access_key
SPACES_SECRET_KEY=your_digitalocean_spaces_secret_key
SPACES_REGION_NAME=nyc3
SPACES_BUCKET_NAME=your_bucket_name

# ===== S3-Compatible Storage Settings (for MinIO) =====
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_REGION_NAME=us-east-1
S3_BUCKET_NAME=market-data
S3_USE_SSL=false
S3_VERIFY_SSL=true
S3_SIGNATURE_VERSION=s3v4
S3_MAX_POOL_CONNECTIONS=50

# ===== AWS S3 Settings (if using AWS directly) =====
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION_NAME=us-east-1
AWS_BUCKET_NAME=finsight-market-data

# ===== Storage Prefix Configuration =====
STORAGE_PREFIX=finsight/market_data/datasets
MODEL_STORAGE_PREFIX=finsight/models
STORAGE_SEPARATOR=/

# ===== Cloud Storage Enablement =====
ENABLE_CLOUD_STORAGE=true
ENABLE_MODEL_CLOUD_SYNC=true
CLOUD_STORAGE_FALLBACK_ENABLED=true

# ===== Data Loading Settings =====
DATA_LOADER_TYPE=hybrid
CLOUD_DATA_CACHE_DIR=/path/to/finsight/tmp/cloud_cache
CLOUD_DATA_CACHE_TTL_HOURS=24

# ===== Default Symbols and Timeframes =====
DEFAULT_SYMBOLS=BTCUSDT,ETHUSDT,BNBUSDT
DEFAULT_TIMEFRAMES=1h,4h,1d

# ===== Experiment Tracker Settings =====
EXPERIMENT_TRACKER_TYPE=mlflow
EXPERIMENT_TRACKER_FALLBACK=simple

# ===== MLflow Settings =====
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=finsight-ml

# ===== Model Saving Configuration =====
SAVE_MULTIPLE_FORMATS=true
ENABLED_ADAPTERS=simple,torchscript,torchserve,triton
