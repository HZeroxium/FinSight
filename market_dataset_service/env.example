# =============================================================================
# FIN SIGHT MARKET DATASET SERVICE - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and customize for your environment
# All variables support environment variable override

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
# Application name and version
APP_NAME=market-dataset-service
DEBUG=false
ENVIRONMENT=development

# Network binding
HOST=0.0.0.0
PORT=8000

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# Base directory for local storage
STORAGE_BASE_DIRECTORY=data/market_data

# Object storage prefix and separator
STORAGE_PREFIX=finsight/market_data/datasets
STORAGE_SEPARATOR=/

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MongoDB connection settings
MONGODB_URL=mongodb://localhost:27017/
MONGODB_DATABASE=finsight_market_data

# =============================================================================
# OBJECT STORAGE CONFIGURATION
# =============================================================================
# Storage provider selection (minio, digitalocean, aws, s3)
STORAGE_PROVIDER=minio

# S3-compatible storage (MinIO, AWS S3)
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_REGION_NAME=us-east-1
S3_BUCKET_NAME=market-data
S3_USE_SSL=false
S3_VERIFY_SSL=true
S3_SIGNATURE_VERSION=s3v4
S3_MAX_POOL_CONNECTIONS=50

# DigitalOcean Spaces specific settings
SPACES_ENDPOINT_URL=https://nyc3.digitaloceanspaces.com
SPACES_ACCESS_KEY=
SPACES_SECRET_KEY=
SPACES_REGION_NAME=nyc3
SPACES_BUCKET_NAME=finsight-market-data

# AWS S3 specific settings
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION_NAME=us-east-1
AWS_BUCKET_NAME=finsight-market-data

# =============================================================================
# DATA COLLECTION CONFIGURATION
# =============================================================================
# Default symbols for data collection (comma-separated)
DEFAULT_SYMBOLS=BTCUSDT,ETHUSDT,BNBUSDT

# Default timeframes for data collection (comma-separated)
DEFAULT_TIMEFRAMES=1h,4h,1d

# Collection limits
MAX_OHLCV_LIMIT=1000
MAX_TRADES_LIMIT=1000
MAX_ORDERBOOK_LIMIT=100

# =============================================================================
# EXCHANGE CONFIGURATION
# =============================================================================
# Binance API credentials (optional - for live data collection)
BINANCE_API_KEY=
BINANCE_SECRET_KEY=

# Binance rate limiting
BINANCE_REQUESTS_PER_MINUTE=1200
BINANCE_ORDERS_PER_SECOND=10
BINANCE_ORDERS_PER_DAY=200000

# =============================================================================
# REPOSITORY CONFIGURATION
# =============================================================================
# Primary repository type (csv, mongodb, influxdb, parquet)
REPOSITORY_TYPE=csv

# Cross-repository configuration for timeframe conversion
SOURCE_REPOSITORY_TYPE=csv
SOURCE_TIMEFRAME=1h
TARGET_REPOSITORY_TYPE=csv
TARGET_TIMEFRAMES=2h,4h,12h,1d

# Conversion settings
ENABLE_PARALLEL_CONVERSION=true
MAX_CONCURRENT_CONVERSIONS=3
CONVERSION_BATCH_SIZE=1000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=INFO
LOG_FILE_PATH=logs/
ENABLE_STRUCTURED_LOGGING=true

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
ENABLE_CACHING=true
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000

# =============================================================================
# ADMIN API CONFIGURATION
# =============================================================================
# IMPORTANT: Change this key in production!
API_KEY=admin-default-key-change-in-production

# =============================================================================
# CRON JOB CONFIGURATION
# =============================================================================
# Enable/disable automated data collection
CRON_JOB_ENABLED=false

# Cron schedule (every 4 hours by default)
CRON_JOB_SCHEDULE=0 */4 * * *

# Job limits
CRON_JOB_MAX_SYMBOLS_PER_RUN=10
CRON_JOB_LOG_FILE=logs/market_data_job.log
CRON_JOB_PID_FILE=market_data_job.pid

# =============================================================================
# DEMO CONFIGURATION
# =============================================================================
# Demo mode settings
DEMO_MAX_SYMBOLS=5
DEMO_DAYS_BACK=7

# =============================================================================
# EUREKA CLIENT CONFIGURATION
# =============================================================================
# Enable/disable Eureka client registration
ENABLE_EUREKA_CLIENT=true

# Eureka server connection
EUREKA_SERVER_URL=http://localhost:8761
EUREKA_APP_NAME=market-dataset-service

# Instance identification
EUREKA_INSTANCE_ID=
EUREKA_HOST_NAME=
EUREKA_IP_ADDRESS=
EUREKA_PORT=8000
EUREKA_SECURE_PORT=8443
EUREKA_SECURE_PORT_ENABLED=false

# Instance URLs
EUREKA_HOME_PAGE_URL=
EUREKA_STATUS_PAGE_URL=
EUREKA_HEALTH_CHECK_URL=

# VIP addresses
EUREKA_VIP_ADDRESS=
EUREKA_SECURE_VIP_ADDRESS=
EUREKA_PREFER_IP_ADDRESS=true

# =============================================================================
# EUREKA TIMING CONFIGURATION
# =============================================================================
# Lease management
EUREKA_LEASE_RENEWAL_INTERVAL_IN_SECONDS=30
EUREKA_LEASE_EXPIRATION_DURATION_IN_SECONDS=90

# Registry operations
EUREKA_REGISTRY_FETCH_INTERVAL_SECONDS=30
EUREKA_INSTANCE_INFO_REPLICATION_INTERVAL_SECONDS=30
EUREKA_INITIAL_INSTANCE_INFO_REPLICATION_INTERVAL_SECONDS=40

# Heartbeat settings
EUREKA_HEARTBEAT_INTERVAL_SECONDS=30

# =============================================================================
# EUREKA RETRY CONFIGURATION
# =============================================================================
# Registration retry settings
EUREKA_REGISTRATION_RETRY_ATTEMPTS=3
EUREKA_REGISTRATION_RETRY_DELAY_SECONDS=5

# Heartbeat retry settings
EUREKA_HEARTBEAT_RETRY_ATTEMPTS=3
EUREKA_HEARTBEAT_RETRY_DELAY_SECONDS=2

# Retry backoff configuration
EUREKA_RETRY_BACKOFF_MULTIPLIER=2.0
EUREKA_MAX_RETRY_DELAY_SECONDS=60

# Auto-reregistration
EUREKA_ENABLE_AUTO_RE_REGISTRATION=true
EUREKA_RE_REGISTRATION_DELAY_SECONDS=10
